
Dans la liste des  commandes, pour chaque commande, 
-  on doit voir la liste des  boissons qui la composent, la quantite  de chaque boisson avec la possibilite de diminuer ou d'augmenter cette quantite, le montant de la boisson qui est calculer automatiquement et se met a jour  quant on diminue ou augmente, 
-   On doit voir egalement le montant total de la commande, qui elle aussi se met automatiquement a jour en fonction de la variation de la  quantite des boissons
-  on doit voir le champs type de payement  qui est un champ select:
        . Si c'est Liquidite, alors on affiche le champ pour la liquite et ce montant doit correspondre au montant total de la commande
        .   Si c'est Orange Money alors il ya pas de champ a afficher pour ca , 
        .   Si c'est Hybride, on affiche les champs pour Liquidite et Orange Money

-   On doit avoir le champ status de type select par defaut en attente:
    .   Si tous les montant sont corrects et on clique sur le bouton valider alors le status devient automatiquement Paye  et on mets ca dans la ;iste des commandes reglees
    .   Si le montant liquidites ou autre en foncion du type de payement, n'est pas egalement au montant de la commande alors quand on clique sur le bouton valider alors on informe que  la commande est non solde et on demande si on veux enregistrer ca , ci s'est oui alors la commande est enregistrer dans les commandes impayees et le status devient automatiquement impaye



###################

maintenant je veux que si le type de paiement est Liquidite et que le montant saisi est > au montant total de la commande, on affiche le champ monaie et le status (DE la monaie) . Si le status est Remis et lorsqu'on valide, tout est bon. Sinon si le status est Avoir et lorsqu'on clique sur valider alors l'avoir est directement ajouter a la liste des avoirs


############

Je dis que lorsque si le type de payment est liquidite, on a 3 conditions a verifier:
1. Si le montant remis est egal au montant de la commande, il ya rien a faire, la commande doit etre validee sans soucis
2.  Si le montant remis par le client est < au montant de la commande alors une erreur est levee pour informer qu'il manque montant de la commande -montant remis
3.  Si le montant remis par le client > au montant de la commande, on affiche la monaie a rendre  et le status de la monaie:
        .   Si le status est avoir alors un avoir est automatiquement  fait et ajouter a la liste des avoirs en attente
        .   Si le status est remis alors pas d'avoir a genrer 


Lorsque le type de paiemnt est Orange Money:
    Alors le montant Orange Money est automatiquement = montant de la commande car le caissier va verifier dans son compte mobile qu'il a recu l'argent et maintenant cliquer
    sur le bouton pour valider la commande

Lorsque le type est Hybride:
    .   Si Le montant liquidite + montant Orange Money doit etre >=  moontant de la commande car souvent avec les frais de retrait que le client ajoute desfois, le caissier peut consider
    ca et ajouter comme Orange Money et dans ce cas , c'est logique que la somme depasse le montant de la commande

    .   Si la somme de montant liquidite et montant Orange Money < montant de la commande alors un message d'erreur est leve pour indiquer qu'il reste 
    montant de la commande - (montant liquidite + montant Orange Money)



###############

Pour le paiement Orange Money, Etant donner que le montant_orang == montant de la commande, il n'est pas necessaire d'afficher ce champ comme un champ de saisi mais plutot afficher le montant Orange Money
Pour le paiement Hybride, Etant donner que le champ Orange Money est calculer automatiquement en faisant la different, au lieu d'afficher les 2 champs
montant liquidite et montant Orange Money comme champs de saisi, on affiche seulement le champ liquidite comme champ de saisi et on affiche le montant Orange Money

##########

On doit pouvoir pouvoir modifier une commande en  ajoutant une nouvelle boisson
On doit pouvoir egalement supprimer une commande

############

super :
maintenant, je veux qu'on ait dans le templates liste_commande, 3 champs choix de type selection unique correspondant aux 3 status de commandes dont le 
.   premier sera les commandes en attente qui est celui par defaut coche, et c'est uniquement les commandes en attente qu'on voit dont le code est exactement le templates actuel

Une fois la commande valider, si son status est payer, elle s'ajoute automatiquement a liste des commandes payees. Sinon, elle s'ajoute a la liste des commandes impayees.
On doit voir tous les champs (infos) de la commande comme definit dans la base de donnees


.   2e sera commande payee et c'est uniquement les commandes payees qu'on voit

.   3e sera Impayer et c'est les commandes uniquement impeyer qu'on voit.

Dans les 3 cas:, on doit avoir un champ de recherche permettant de rechercher selon l'id de la commande, la date et le nom du personnel


############################

Je veux qu'on  puisse afficher un cercle a l'angle droit  le nom de la boisson et son stock actuel de sorte que son stock soit automatiquement mis a jour 
selon  que l'on augmente ou diminue sa quantite dans la commande. Ce que je veux dire est que pour chaque boisson, lorsque dans la commande, l'intersaction a lieu sur celle-ci,
automatiquement dans le cercle, le nom de la boisson avec son stock actuel, ce qui va permettre au caissier de suivre  l'evolution du stock de chaque boisson lors de la vente.
Egalement, lorsque ce stock vaut 0, on ne peut plus ajouter cette boisson  dans une commande etat  donne que le stock est epuise

############### Details de la vente du jour ####################

Etant donne une boite de nuit, un jour de vente est defini par ie qu'on commence de 18h00 d'aujourd'hui jusqu'a 6h du matin du jour suivant.
Par exemple nous sommes aujourd'hui 02-10-2025 (02 octobre 2025) donc la vente du jour sera de 18h00 du 02-10-2025 a 6h du matin du 03-10-2025.
Donc voila la definition du jour de vente.

Les details de la vente inclus;
1.  La vente totale de chaque boisson.
    Pour chaque boisson vendue ce jour la, on  aura le nom de la boisson, son prix unitaire et la quantite totale (somme de toute les quantites de toutes les commandes de ce jour) 
    et le montant total(qui est le produit de son prix unitaire par la quantite totale)

2.  Le montant total de la vente: 
    C'est la somme de tous les montants des boissons

3. Le montant total des impayees: c'est la somme des montants restants a payer des commandes impayees

4.  Le montant total des depenses: c'est totale de toutes les depenses de ce jour

5. Le montant total des avances sur salaire: c'est la somme de toutes avances sur salaire de ce jour

6. Montant decaisse: c'est la somme des montant total des impayees, montant total des depenses et montant total des avances sur salaire

7. Chiffre d'affaire realise ce jour: c'est la difference entre le montant total de la vente et le montant decaisse

NB: Tous ces calculs sont faits automatiquement et mis a jour automatiquement

On aurait aussi besoin de connaitre les informations sur le personnel afin de donner des primes d'encouragement, qui a le plus vendu ? la quantite de chaque boisson vendu, la quantite totale de toutes les boissons qu'il
a vendu, quel est le montant des impaye qu'il a en son nom 


Super, je pense qu'il faut aussi avoir des informations sur les avaces de salaire de chaque personnel

############# Bouton d'ouverture et de fermeture ####


Super, au lieu de definir la date de commencement et de fin, il faut permettre a ce que ca soit personnalisable et dynamique ie qu'on aura 1 bouton de type on/off:
- Si c'est On ( ie qu'on Ouvre la boite) : et automatiquement le start_time prend la valeur de la date lors du clic. Et des cet instant on peut faire des operations sur les 
avances, les depenses les commandes, la presences.

- Si c'est Off(fermer): Il faut demander l'avis du caissier s'il veut vraiment fermer, si c'est non, on reste toujours sur On, si c'est Oui, alors ie que le caissier a confirmer
et le bouton se met a Off. En ce moment, le end_time prend la date de l'instant que le caissier a confirmer la fermeture. Et ainsi le rapport (de la date d'ouverture a la 
fermeture est archives)

Le bouton, une fois s'il est en mode On, tant que ce n'est pas le caissier lui-meme qui a confirmer en  changeant en Off, il ne doit pas changer meme si le caissier se deconnecte
et se reconnecte ou meme s'il ya eu un delestage et que la machine soit eteinte automatiquement.

Ce bouton modelise une situation reelle qui est le cas de la boite. Tant qu'on ne l'a pas ouverte, on ne peut pas avoir de commandes, faire de depenses, donner des avances, ni 
parler de la presence du personnel.


Je pense que ce bouton doit-etre un contexte global et ne dependre d'aucun model




c'est super mais je vais te decrire une situation que j'ai remarque qui n'est pas bien.

En fait cette session active doit etre visible dans tous les templates que le caissier doit voir en fonction des droits d'acces qui lui sont accordes (tout ce qui est lie a commande,
Depenses, avances, presence). Et tant que cette session n'est pas active, il ne peut rien et on doit lever un message pour l'informer qu'il doit d'abord ouvrir afin de pouvoir le faire.
Parce que j'ai remarque qu'avec la logique actuelle, le caissier peut ajouter une commande valider une commande, donner des avoirs ou des depenses et cela n'est pas enregistrer
dans le rapport . Pourtant tout doit se faire de l'ouverture a la fermeture pour un controle total et de transparences

quand on clique sur charger l'historique, il faut afficher toute l'historique des rapport et permettre de faire une recherche selon la date de debut sans necessairement mettre 
l'heure et la minute et s'il arrive  q'on ait plusieurs dates  de debut avec des heures et minutes qi different , on affiche la liste pour cette dates pour un choix.

Si c'est fermer, c'est seulement l'historique qu'on voit

############## Ajout des infos client ###

Pour une transparences et une tracabilite des commande et leur traitement, Il faut integrer dans la commandes des informations client suivants"
.   Numero de telephone : un champ obligatoire (on doit avoir le zip code deja disponible pour selectionner le pays et par defaut etre sur +226 Burkina Faso)
.   Nom  et prenom du client (non obligatoire)


je veux maintenant que dans la liste des commandes, tu ajoutes a chaque commande et facture les numero de telephone( indicatif + numero), nom et prenoms du client s'ils existent
########### Statistiques ############## 

Je veux maintenant faire dans l'app statistiques  des visualisons selon la periode : Journalier, hebdomadaire, mensuel, trimestriel et annuel
Ces differents graphiques inclus:
1.  visualisons du chiffre d'affaire, des depenses et des avances sur salaire. Ici on aura donc 3 variables (Chiffre d'affaire, Depense et Avance sur salaire ) 
avec des options de cocher plusieurs ie que si on coche chiffre d'affaire seulement, c'est seulement l'evolution du chiffre d'affaire qu'on verra, si on coche chiffre d'affaire
et depenses , ce sont les 2 courbes d'evolution qu'on vera sur le meme graphiques et si on coche les 3 c'est egalement les 3 qu'on vera, bien attendu on peut decocher aussi

2.  Diagramme en barre pour les quantite des boissons

3.  Diagramme pour visualisons les quantite de chaque boisson vendu par chaque personnel

4.  Diagramme pour visualiser la quantite de toutes les boisson vendu par chaque personnel

5.  Diagramme pour visualiser le top 10 des clients qui ont le plus consomme ( ie les liens dont les montants de leurs commandes est le plus eleve) sachant que sur chaque 
commande il ya le numero du client. Donc un client s'il consomme regulierement on peut connaitre son montant  afin de leur offrir des boissons pour les fideliser


Super, maitenant je veux donner quelques clarifications sur la periode:
Si la periode est:
-   Annuel, on fait directement l'aggregation sur les anneees
-   Trimestriel, il faut choisir l'annee qu'on veut  parmis la liste des annees qui sont dans la base de donnees
-   Mensuel, il faut egalement d'abord choisir l'annee
-   Hebdomadaire, il faut choisir d'abord l'annee egalement
-   Journalier, il faut choisir la date (jour-mois-annee)

Je ne sais pas si tu me comprends, quand on choisi annee, ce n'est pas pour une seule annnee on veut voir mais toutes les annees, ce qui veut dire que les donnees ont ete aggregees par
annees .

 C'est la meme chose pour trimestriel et mensuel et hebdomadaire.

 Si la periode est Trimestriel ou Mensuel, il faut afficher automatiquement un champ select avec la liste de toutes les annnees disponible pour permettre de choisir l'annee.
 Ainsi les donnees sont  aggregees par trimestre ou mois  de l'annee choisi. 
 Pour trimestriel, on aura donc 4 trimestres car une annee en a 4.
 Pour mensuel on en aura 12.

 Si la periode est hebdomadaire, il faut automatiquement afficher d'abord le champ annee pour qu'il choississe l'annee puis le champ mois qui est la liste des 12 mois de 
 l'annee. Donc pour hebdomadaire, ca sera les 4 semaines du mois choisi de l'annee choisie.

 Si la periode est Journalier, il faut automatiquement afficher un champ avex un calendrier pour permettre de choisir la date  

########### 
C'est bien mais je veux que pour le graphiques en :
1️⃣ Évolution du Chiffre d'Affaires, Dépenses et Avances: si la periode est Journalier, on fait un Diagramme circulaire du montant total de la vente du jour
en representant le CA, les Impayer, Depense et Avances


Pour le nom des mois, ca doit etre en francais.
Pout la Performance du les Performance personnel, il faut seulement faire le graphiques Performance du Personnel
Quantité totale vendue par employé

Pour le top 10 des clients, je ne sais pas entre le camabert et le  Diagrammee en barres, lequel est mieux 

Pour le graphique Évolution des Flux Financiers, pour les semaine et trimestres, il faut directement mettre la periode (par exemple 
15/09/2025 - 21/09/2025)

J'ai remarque que lorsque l'on change de filtre automatiquement, on reviens au graphique de l'Évolution des Flux Financiers, ce qui n'est pas normal car chaque graphique doit etre 
independant


 ############

 Ce code marche bien mais maitenant il faut tenir compte de la logique du  start_time et end_time.
 Les rapports sont automatiquement enregistrer dans la base de donnees a la date du end_time mais ce end_time peut se retrouve hors de la periode  donc c'est 
 cette logique qu'on va appliquer:
 
 Par exemple:
 Pour le jour: le start_time peut etre un  exemple le 06-10-2025 15h:12 et le end_time a 07-10-2025 6h:08 pourtant les donnees enregistrer sont pour le jour 06-10-2025 et non 
 pour le 07-10-2025. Ce qui signifie que l'aggregation se fait en prenant tous les start_time du jour concerne

 Pour la semaine, le dernier start_time pour la semaine peut commencer le dernier jour de la semaine en question et son end_time se trouve dans le premier jour de la semaine 
 suivante alors que le rapport enregistrer c'est pour la semaine et non la semaine dans laquelle le end_time se trouve.
 Ce qui veut donc dire que pour la semaine sa sera du premier start_time du lundi( exemple 15 -09-2025 16h37) au dernier start_time du dimanche (21-09-2025 18h:29) meme si son dernier end_time se trouve dans le 
 lundi de la semaine suivate(22-09-2025 03h:47)

 Pour le mois, ca sera du premier start_time du premier jour du mois (par exemple 01-09-2025 7h:18)  jusqu'au dernier start_time du dernier jour du mois (30-09-2025 14h:23) 
 meme si son end_time se trouve dans le premier jour du mois suivant (01-10-2025 05h03)  

 Pour le trimestre, ca sera du  premier start_time du premier jour du trimestre concerne (par exemple du 01-01-2025 12h:14 ) au dernier start_time du dernier jour du trimestre
 conserne (31-03-2025 19h16) meme si son end_time se trouve dans le premier jour du trimestre suivant (par exemple 01-04-2025 2h56)

 Pour l'annee, ca sera du premier start_time du premier jour de l'annee (01-o1-2024 20h30) jusqu'au dernier start_time du 31-12-2024 meme si son dernier end_time se trouve 
 le 01-01-2025